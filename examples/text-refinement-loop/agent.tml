trident: "0.1"
name: loop-test
description: Test workflow with iterative refinement loop
version: "1.0.0"

defaults:
  model: anthropic/claude-sonnet-4-20250514
  temperature: 0.7
  max_tokens: 1024

entrypoints:
  - input

nodes:
  input:
    type: input
    schema:
      text: string, Text to refine

  refine_loop:
    type: branch
    workflow: ./workflows/quality-loop.tml
    loop_while: "needs_refinement"
    max_iterations: 3

  output:
    type: output
    format: json

edges:
  e1:
    from: input
    to: refine_loop
    mapping:
      text: text

  e2:
    from: refine_loop
    to: output
    mapping:
      result: output
